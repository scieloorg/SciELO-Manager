{% extends "base_list.html" %}
{% load i18n %}
{% load static %}
{% load scielo_common %}
{% load query_string %}

{% block page_title %}{% trans "Journals" %}{% endblock %}

{% block breadcrumb %}
  <ul class="breadcrumb">
    <li><a href="{% url index %}">{% trans 'Home' %}</a> <span class="divider">/</span></li>
    {% if request.GET.q %}
       <li><a href="{% url journal.index %}">{% trans 'Journals DashBoard' %}</a> <span class="divider">/</span></li>
       <li class="active">{% trans 'Search' %}</li>
    {% else %}
      <li class="active">{% trans 'Journals DashBoard' %}</li>
    {% endif %}
  </ul>
{% endblock %}

{% block shortaccess %}
{% endblock %}

{% block body %}
<div class="row-fluid show-grid">
  <div class="span6" style="padding:0 0 10px 0">
    <a class="btn btn-primary" href="{% url journal.add %}">{% trans 'New' %}</a>
  </div>
  <div class="span6" style="text-align:right">
      {% simple_pagination objects_journal %}
  </div>
</div>

<div class="row-fluid">
<ul class="nav nav-tabs">
  <li class="{% if not request.GET.jstatus %} active {% endif %}">
    <a href="{% query_string request "q" "include_ampersand" %}">{% trans "All" %}</a>
  </li>
  <li class="{% if request.GET.jstatus == 'current' %} active {% endif %}">
    <a href="{% query_string request "q" "include_ampersand" %}jstatus=current">{% trans "Current" %}</a>
  </li>
  <li class="{% if request.GET.jstatus == 'suspended' %} active {% endif %}">
    <a href="{% query_string request "q" "include_ampersand" %}jstatus=suspended">{% trans "Suspended" %}</a>
  </li>
  <li class="{% if request.GET.jstatus == 'deceased' %} active {% endif %}">
    <a href="{% query_string request "q" "include_ampersand" %}jstatus=deceased">{% trans "Deceased" %}</a>
  </li>
  <li class="{% if request.GET.jstatus == 'inprogress' %} active {% endif %}">
    <a href="{% query_string request "q" "include_ampersand" %}jstatus=inprogress">{% trans "In progress" %}</a>
  </li>
  <li class="dropdown" id="menu1">
    <a class="dropdown-toggle" data-toggle="dropdown" href="javascript:void(0)">
    {% trans "Actions" %}
    <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      {% if not request.GET.is_available %}
        <li>
          <a id="bulk_action_enable" rel="{% url journal.bulk_action 'is_available' '0' %}" href="javascript:void(0)">{% trans "Move to trash" %}</a>
        </li>
      {% endif %}
    </ul>
  </li>
</ul>
</div>
<form action="javascript:void(0)" method="post" id="bulk_action">
  {% csrf_token %}
  <table class="table table-striped">
  <thead>
    <tr>
      <th><input id="check_all" type="checkbox" name="check_all" value=""></th>
      <th>{% trans "Journal Title" %}</th>
      <th>{% trans "Print ISSN" %}</th>
      <th>{% trans "Electronic ISSN" %}</th>
      <th>{% trans "Status" %}</th>
    </tr>
  </thead>
  <tbody>
    {% for journal in objects_journal.object_list %}
    <tr id="{{ journal.pk }}">
      <td>
        <input type="checkbox" name="action" value="{{ journal.id }}">
      </td>
      <td>
        <h4>
          <a href="{% url journal.edit journal.pk %}">{{ journal.title }}</a>
        </h4>
        <ul class="_actions">
          <li>
            <a href="{% url issue.index journal.pk %}">
              {% trans 'Issues' %}
            </a>
          </li>
          <li>
            <a href="{% url section.index journal.pk %}">
              {% trans 'Sections' %}
            </a>
          </li>
          <li>
            <a href="{% url journal_status.edit journal.pk %}">
              {% trans 'Status' %}
            </a>
          </li>
        </ul>
      </td>
      <td>{{ journal.print_issn }}</td>
      <td>{{ journal.eletronic_issn }}</td>
      <td>{{ journal.pub_status }}</td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="5">{% trans 'There are no items.' %}</td>
    </tr>
    {% endfor %}
  <tbody>
  </table>
</form>
{% pagination objects_journal %}
{% endblock %}
